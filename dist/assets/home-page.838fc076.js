import{s as F,_ as S,t as g}from"./index.ac7bf4b1.js";import{r as h,f as L,Z as u,o as f,c as x,T as a,L as r,F as M,a2 as T,K as V,a as i,S as b,n as R,R as v,_ as A}from"./@vue.9f1b68af.js";import{i as N}from"./echarts.b27b3039.js";import{d as j}from"./dayjs.644349ef.js";import{e as B}from"./element-plus.55dd86f2.js";import"./vue-router.949634a5.js";import"./vuex.49683c05.js";import"./moment.a5c37c1e.js";import"./axios.8b958ab2.js";import"./js-cookie.31874410.js";import"./@element-plus.a205db37.js";import"./nprogress.2f56b1fe.js";import"./lodash-es.3d1d9723.js";import"./@vueuse.ef512f30.js";import"./@popperjs.da6c49cb.js";import"./@ctrl.2e36ce53.js";import"./async-validator.5d25c98b.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./zrender.bd3e8a7f.js";function E(d){return F({url:"qt/call/overview",method:"get",params:d})}const Y={props:{value:{type:Object,default:()=>{}}},setup(d){const _=h([{id:"totalBound",name:"\u547C\u53EB\u603B\u6570",value:0,icon:"home-total-call",link:"CallRecords",isFormat:!1},{id:"inbound",name:"\u547C\u5165\u6570",value:0,icon:"home-incoming-call",link:"CallRecords",isFormat:!1},{id:"outbound",name:"\u547C\u51FA\u6570",value:0,icon:"home-out-call",link:"CallRecords",isFormat:!1},{id:"lost",name:"\u547C\u635F\u6570",value:0,icon:"home-lose-call",link:"CallRecords",isFormat:!1},{id:"totalSms",name:"\u77ED\u4FE1\u6570",value:0,icon:"home-message",link:"NoteRecords",isFormat:!1},{id:"totalTime",name:"\u901A\u8BDD\u603B\u65F6\u957F",value:0,icon:"home-total-time",link:"NewsRecords",isFormat:!0},{id:"avergeTime",name:"\u5E73\u5747\u901A\u8BDD\u65F6\u957F",value:0,icon:"home-average-time",link:"WorkorderList",isFormat:!0}]),m=p=>{let c=parseInt(p),o=(Math.floor(c/3600)<10,Math.floor(c/3600)),n=(Math.floor(c/60%60)<10,Math.floor(c/60%60)),l=(Math.floor(c%60)<10,Math.floor(c%60));return o=o>9?o:"00",n=n>9?n:"00",l=l>9?l:"00",o+":"+n+":"+l},t=p=>{Object.entries(p).forEach(o=>{_.value.forEach(n=>{n.id===o[0]&&(n.value=o[1])})})};return L(()=>d,()=>{d.value&&t(d.value)},{immediate:!0,deep:!0}),{cardItemList:_,formatSeconds:m}}},z={class:"home-page-statistic"},I={class:"flex-box flex-around card-box__li"},O={class:"card-box__right"},P={class:"card-box__number"},U={key:0},W={key:1},q={class:"card-box__name"};function G(d,_,m,t,p,c){const o=u("svg-icon"),n=u("el-col"),l=u("el-row");return f(),x("div",z,[a(l,{gutter:20},{default:r(()=>[(f(!0),x(M,null,T(t.cardItemList,(e,s)=>(f(),V(n,{span:6,key:s},{default:r(()=>[i("div",I,[a(o,{name:e.icon},null,8,["name"]),i("div",O,[i("p",P,[e.isFormat?(f(),x("span",U,b(t.formatSeconds(e.value)),1)):(f(),x("span",W,b(e.value),1))]),i("p",q,b(e.name),1)])])]),_:2},1024))),128))]),_:1})])}var K=S(Y,[["render",G]]);const Z={props:{value:{type:Array,default:()=>[]}},setup(d){const _=h([]),m=h([]),t=h([]),p=h([]),c=h([]),o=(l=[])=>{l&&l.length&&l.forEach(e=>{_.value.push(j(e.day).format("YYYY-MM-DD")),m.value.push(e.totalBound),t.value.push(e.inbound),p.value.push(e.outbound),c.value.push(e.lostbound)})},n=()=>{const l=document.getElementById("line-chart"),e=N(l),s={title:{show:_.value.length===0,extStyle:{color:"#333",fontSize:20},text:"\u6682\u65E0\u6570\u636E",left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{data:["\u547C\u53EB\u603B\u6570","\u547C\u5165\u6570","\u547C\u51FA\u6570","\u547C\u635F\u6570"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{name:"\u65E5\u671F",type:"category",boundaryGap:!1,data:_.value},yAxis:{name:"\u6570\u91CF",type:"value",axisLine:{show:!0}},series:[{name:"\u547C\u53EB\u603B\u6570",type:"line",data:m.value,itemStyle:{normal:{color:"#409eff",lineStyle:{color:"#409eff"}}}},{name:"\u547C\u5165\u6570",type:"line",data:t.value,itemStyle:{normal:{color:"#67C23A",lineStyle:{color:"#67C23A"}}}},{name:"\u547C\u51FA\u6570",type:"line",data:p.value,itemStyle:{normal:{color:"#E6A23C",lineStyle:{color:"#E6A23C"}}}},{name:"\u547C\u635F\u6570",type:"line",data:c.value,itemStyle:{normal:{color:"#F56C6C",lineStyle:{color:"#F56C6C"}}}}]};s&&e.setOption(s)};return L(()=>d,()=>{o(d.value),R(()=>{n()})},{immediate:!0,deep:!0}),window.onresize=function(){R(()=>{n()})},{}}},H={class:"home-page-charts"},J=i("div",{id:"line-chart",style:{height:"400px"}},null,-1),Q=[J];function X(d,_,m,t,p,c){return f(),x("div",H,Q)}var ee=S(Z,[["render",X]]);const te={setup(){return{cardList:h([{name:"\u5C0F\u7F8E",jobNumber:"001",rate:4.5,callsTotal:11,callDuration:"00:11:12",seat:"\u6280\u80FD\u7EC4\u4E00"},{name:"\u5C0F\u4E3D",jobNumber:"002",rate:4.1,callsTotal:8,callDuration:"00:09:10",seat:"\u6280\u80FD\u7EC4\u4E8C"},{name:"\u5C0F\u7EA2",jobNumber:"003",rate:3.8,callsTotal:5,callDuration:"00:07:34",seat:"\u6280\u80FD\u7EC4\u4E09"},{name:"\u5C0F\u6C5F",jobNumber:"004",rate:4,callsTotal:10,callDuration:"00:11:01",seat:"\u6280\u80FD\u7EC4\u56DB"}])}}},ae={class:"home-seat-card"},oe=i("div",{class:"card-header"},"\u5EA7\u5E2D\u5361\u7247",-1),le={class:"card-items flex-box"},ne={class:"flex-box flex-start"},se={class:"flex-box flex-column flex-around"},re={class:"flex-box flex-between"},ce={class:"name"},ie={class:"jobnumber"},de={class:"seat"},_e={class:"tags"};function ue(d,_,m,t,p,c){const o=u("svg-icon"),n=u("el-rate"),l=u("el-tag"),e=u("el-card");return f(),x("div",ae,[a(e,{class:"card-box",shadow:"never"},{header:r(()=>[oe]),default:r(()=>[i("div",le,[(f(!0),x(M,null,T(t.cardList,(s,y)=>(f(),x("div",{class:"card-item",key:y},[a(e,null,{default:r(()=>[i("div",ne,[a(o,{name:"seat",class:"avatar-icon"}),i("div",se,[i("div",re,[i("p",null,[i("span",ce,b(s.name),1),i("span",ie,b(s.jobNumber),1)]),i("span",de,b(s.seat),1)]),i("p",null,[a(n,{modelValue:s.rate,"onUpdate:modelValue":C=>s.rate=C,disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue","onUpdate:modelValue"])])])]),i("div",_e,[a(l,{class:"tag-item"},{default:r(()=>[v("\u901A\u8BDD\u603B\u6570\uFF1A"+b(s.callsTotal),1)]),_:2},1024),a(l,{class:"tag-item"},{default:r(()=>[v("\u5E73\u5747\u901A\u8BDD\u65F6\u957F\uFF1A"+b(s.callDuration),1)]),_:2},1024)])]),_:2},1024)]))),128))])]),_:1})])}var me=S(te,[["render",ue]]);const pe={components:{StatisticCard:K,LineChart:ee,SeatCard:me},setup(){const d=h(0),_=h([]),m=A({start:g(-7),end:g(0)}),t=h(null),p=e=>{_.value=[];const s={1:0,2:-1,3:-2,4:-30,5:-90,6:-180};m.start=e==1||e==2?g(s[e]):g(s[e]),m.end=e==1||e==2?g(s[e]):g(0),l()},c=e=>{e?(d.value=0,m.start=e[0],m.end=e[1]):(m.start=g(-7),m.end=g(0)),l()},o=h(null),n=h(null),l=()=>{t.value=B.service("\u52A0\u8F7D\u4E2D..."),E(m).then(e=>{const{totalBound:s,inbound:y,outbound:C,lost:k,totalSms:w,totalTime:D,perDayOverview:$}=e.data;o.value=$||[],n.value={totalBound:s,inbound:y,outbound:C,lost:k,totalSms:w,totalTime:D},n.value.avergeTime=y||C?Math.round(D/(y+C)):0,setTimeout(()=>{t.value.close()},500)}).catch(()=>{setTimeout(()=>{t.value.close()},500)})};return l(),{dateRadio:d,dateRange:_,handleRadio:p,handleDate:c,statisticData:n,lineData:o}}},he={class:"home-page-wrapper"},fe={class:"model-search flex-box flex-center"},ve=v("\u4ECA\u5929"),ge=v("\u6628\u5929"),be=v("\u524D\u5929"),xe=v("30\u5929"),ye=v("90\u5929"),Ce=v("\u534A\u5E74"),$e=v("\u67E5\u8BE2");function De(d,_,m,t,p,c){const o=u("el-radio-button"),n=u("el-radio-group"),l=u("el-form-item"),e=u("el-date-picker"),s=u("el-button"),y=u("el-form"),C=u("StatisticCard"),k=u("LineChart"),w=u("SeatCard"),D=u("PageWrapper");return f(),V(D,null,{default:r(()=>[i("div",he,[i("div",fe,[a(y,{ref:"formRef",inline:!0},{default:r(()=>[a(l,null,{default:r(()=>[a(n,{modelValue:t.dateRadio,"onUpdate:modelValue":_[0]||(_[0]=$=>t.dateRadio=$),size:"large",onChange:t.handleRadio},{default:r(()=>[a(o,{label:1},{default:r(()=>[ve]),_:1}),a(o,{label:2},{default:r(()=>[ge]),_:1}),a(o,{label:3},{default:r(()=>[be]),_:1}),a(o,{label:4},{default:r(()=>[xe]),_:1}),a(o,{label:5},{default:r(()=>[ye]),_:1}),a(o,{label:6},{default:r(()=>[Ce]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1}),a(l,null,{default:r(()=>[a(e,{size:"large",style:{width:"300px"},modelValue:t.dateRange,"onUpdate:modelValue":_[1]||(_[1]=$=>t.dateRange=$),type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4","value-format":"YYYY-MM-DD",clearable:"",onChange:t.handleDate,onClear:t.handleDate},null,8,["modelValue","onChange","onClear"])]),_:1}),a(l,null,{default:r(()=>[a(s,{type:"primary",size:"large",onClick:d.handleSearch},{default:r(()=>[$e]),_:1},8,["onClick"])]),_:1})]),_:1},512)]),a(C,{value:t.statisticData},null,8,["value"]),a(k,{value:t.lineData},null,8,["value"]),a(w)])]),_:1})}var qe=S(pe,[["render",De]]);export{qe as default};

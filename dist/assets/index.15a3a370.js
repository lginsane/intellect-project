import{_,g as h}from"./index.ac7bf4b1.js";import{b as c}from"./element-plus.55dd86f2.js";import{r as n,_ as v,f as b,Z as f,o as U,c as x,T as m,L as y,R as g}from"./@vue.9f1b68af.js";const B={name:"FileUpload",props:{accept:{type:String,default:""},fileSize:{type:Number,default:1},limitNum:{type:Number,default:0},buttonType:{type:String,default:"primary"},fileList:{type:Array,default:()=>[]},showFileList:{type:Boolean,default:!1},typeArray:{type:Array,default:()=>["xls","xlsx"]}},setup(a,d){const o=n("http://106.14.240.168:8080/common/upload"),e=v({Authorization:"Bearer "+h()}),u=n(10),l=n(1),s=n("primary");return b(()=>a,()=>{const{limitNum:t,fileSize:r,buttonType:i}=a;u.value=t,l.value=r,s.value=i},{immediate:!0,deep:!0}),{action:o,headers:e,btnType:s,handleBeforeUpload:t=>{const r=t.name.replace(/.+\./,""),i=t.size/1024/1024<l.value;return a.typeArray&&!a.typeArray.includes(r.toLowerCase())?(c({type:"error",message:`\u6587\u4EF6\u683C\u5F0F\u4E0D\u6B63\u786E, \u8BF7\u4E0A\u4F20${type.value.join("/")}\u683C\u5F0F\u6587\u4EF6!`,duration:1e3}),!1):i?!0:(c({type:"error",message:`\u4E0A\u4F20\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${l.value} MB!`,duration:1e3}),!1)},handleUploadError:()=>{c({type:"error",message:"\u4E0A\u4F20\u6587\u4EF6\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01",duration:1e3})},handleUploadSuccess:t=>{const{fileName:r}=t;d.emit("updateFile",r)}}}},T={class:"upload-file"},w=g(" \u5BFC\u5165\u6587\u4EF6 ");function L(a,d,o,e,u,l){const s=f("el-button"),p=f("el-upload");return U(),x("div",T,[m(p,{action:e.action,"before-upload":e.handleBeforeUpload,mutilple:!1,"on-error":e.handleUploadError,"on-success":e.handleUploadSuccess,headers:e.headers,"file-list":o.fileList,"show-file-list":o.showFileList,accept:o.accept,class:"upload-file-uploader"},{default:y(()=>[m(s,{size:"default",type:e.btnType},{default:y(()=>[w]),_:1},8,["type"])]),_:1},8,["action","before-upload","on-error","on-success","headers","file-list","show-file-list","accept"])])}var E=_(B,[["render",L]]);export{E as F};

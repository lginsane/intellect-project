import{e as F,f as I,g as T}from"./smsTemplate.3814aa57.js";import{_ as z,d as R}from"./index.e88c8aa4.js";import{y as S,_ as M}from"./@element-plus.a205db37.js";import{b as w}from"./element-plus.55dd86f2.js";import{r as g,i as U,Z as a,o as d,K as v,L as m,a as W,T as f,c as N,a2 as B,F as A,Q as D,R as q}from"./@vue.9f1b68af.js";import"./vue-router.949634a5.js";import"./vuex.49683c05.js";import"./moment.a5c37c1e.js";import"./axios.8b958ab2.js";import"./js-cookie.31874410.js";import"./nprogress.2f56b1fe.js";import"./lodash-es.3d1d9723.js";import"./@vueuse.ef512f30.js";import"./@popperjs.da6c49cb.js";import"./@ctrl.2e36ce53.js";import"./dayjs.644349ef.js";import"./async-validator.5d25c98b.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";const K={components:{Plus:S,Delete:M},setup(){const L=g(null),i=g({configs:[{elements:[],order:1}]}),P={},t=g([]);function x(){return new Promise(o=>{F({pageSize:1,pageNumber:1e3}).then(e=>{t.value=e.root,o()})})}const b=()=>{I().then(o=>{const l=o.root;if(!l)return;let e=[];const{firstList:u,secondList:r,thirdList:n,fourthList:s}=l;e.push({tempList:[...u],elements:[],order:1}),r&&r.length&&e.push({tempList:[...r],elements:[],order:2}),n&&n.length&&e.push({tempList:[...n],elements:[],order:3}),s&&s.length&&e.push({tempList:[...s],elements:[],order:4}),e.forEach(c=>{c.tempList.forEach(_=>{c.elements.push(`${_.userId},${_.nickName}`)})}),i.value.configs=[...e]})},p=g(!1),k=()=>{L.value.validate(o=>{if(!o||p.value)return;p.value=!0;let l=[],e=[],u=[],r=[];const n={1:l,2:e,3:u,4:r};R(i.value.configs).forEach(_=>{let V={};_.elements.forEach(E=>{V={nickName:E.split(",")[1],userId:E.split(",")[0]},n[_.order].push(V)})});const c={};c.firstList=l,e.length&&(c.secondList=e),u.length&&(c.thirdList=u),r.length&&(c.fourthList=r),T(c).then(()=>{p.value=!1,w({type:"success",message:"\u63D0\u4EA4\u6210\u529F",duration:1e3}),b()}).catch(()=>{p.value=!1})})},C=()=>{if(i.value.configs.length>=4){w({type:"warning",message:"\u6700\u591A\u53EF\u6DFB\u52A04\u7EA7",duration:1e3});return}i.value.configs.push({elements:[],order:i.value.configs.length+1})},h=o=>{i.value.configs.splice(o,1)},y=o=>({0:"\u4E00\u7EA7",1:"\u4E8C\u7EA7",2:"\u4E09\u7EA7",3:"\u56DB\u7EA7",4:"\u4E94\u7EA7",5:"\u516D\u7EA7",6:"\u4E03\u7EA7",7:"\u516B\u7EA7",8:"\u4E5D\u7EA7",9:"\u5341\u7EA7"})[o];return U(async()=>{await x(),b()}),{formRef:L,form:i,rules:P,auditPersonList:t,btnLoading:p,handleSubmit:k,handlePlus:C,handleDelete:h,convertToChinaNum:y}}},Q={class:"container"},Z=q("\u786E\u5B9A");function G(L,i,P,t,x,b){const p=a("el-option"),k=a("el-select"),C=a("plus"),h=a("el-icon"),y=a("delete"),o=a("el-form-item"),l=a("el-button"),e=a("el-form"),u=a("PageWrapper");return d(),v(u,null,{default:m(()=>[W("div",Q,[f(e,{ref:"formRef",model:t.form,rules:t.rules,"label-width":"130px"},{default:m(()=>[(d(!0),N(A,null,B(t.form.configs,(r,n)=>(d(),N("div",{key:n},[f(o,{label:`\u5BA1\u6279\u4EBA\uFF08${t.convertToChinaNum(n)}\uFF09:`,class:"flex-box flex-nowrap",prop:"configs."+n+".elements",rules:{required:!0,message:"\u8BF7\u9009\u62E9\u5BA1\u6279\u4EBA",trigger:"blur"}},{default:m(()=>[f(k,{modelValue:r.elements,"onUpdate:modelValue":s=>r.elements=s,placeholder:"\u8BF7\u9009\u62E9\u5BA1\u6279\u4EBA",multiple:""},{default:m(()=>[(d(!0),N(A,null,B(t.auditPersonList,s=>(d(),v(p,{key:s.userId,label:s.nickName,value:`${s.userId},${s.nickName}`},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),n===0?(d(),v(h,{key:0,size:"20px",color:"#1B83EF",onClick:t.handlePlus},{default:m(()=>[f(C)]),_:1},8,["onClick"])):D("",!0),t.form.configs.length>1&&n===0?(d(),v(h,{key:1,size:"20px",color:"#F56C6C",onClick:s=>t.handleDelete(n)},{default:m(()=>[f(y)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1032,["label","prop"])]))),128)),f(o,null,{default:m(()=>[f(l,{type:"primary",onClick:t.handleSubmit,class:"submit-btn",loading:t.btnLoading},{default:m(()=>[Z]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["model","rules"])])]),_:1})}var de=z(K,[["render",G]]);export{de as default};

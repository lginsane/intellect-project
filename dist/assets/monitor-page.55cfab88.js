import{s as E,_ as V,a as L,b as J}from"./index.e88c8aa4.js";import{b as $}from"./element-plus.55dd86f2.js";import{r as p,x as B,Z as i,o as _,c as b,T as t,L as a,a as n,S,F as I,a2 as M,K as C,R as x,_ as D,f as j,Q as N,G as X}from"./@vue.9f1b68af.js";import{s as F}from"./message.a9f75245.js";import{u as G}from"./vuex.49683c05.js";import"./vue-router.949634a5.js";import"./moment.a5c37c1e.js";import"./axios.8b958ab2.js";import"./js-cookie.31874410.js";import"./@element-plus.a205db37.js";import"./nprogress.2f56b1fe.js";import"./lodash-es.3d1d9723.js";import"./@vueuse.ef512f30.js";import"./@popperjs.da6c49cb.js";import"./@ctrl.2e36ce53.js";import"./dayjs.644349ef.js";import"./async-validator.5d25c98b.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";function Q(d){return E({url:"qt/staff/selectRegisterExtension",method:"get",params:d})}function Z(d){return E({url:"qt/staff/staffInit",method:"get",params:d})}function Y(d){return E({url:"qt/staff/updateExtension",method:"get",params:d})}function ee(d){return E({url:"qt/staff/updateStatus",method:"get",params:d})}const te={setup(d,o){const m=p(0),e=p(null),v=p([]);(()=>{Z().then(s=>{})})(),(()=>{Q().then(s=>{v.value=s.root})})();const l=B(()=>({0:"check-out",1:"check-in"})[m.value]),f=B(()=>({1:"\u7B7E\u5165",0:"\u7B7E\u51FA"})[m.value]);return{iconName:l,statusName:f,handleCommand:s=>{if(s==1&&!e.value){$({type:"warning",message:"\u8BF7\u9009\u62E9\u5206\u673A",duration:1e3});return}ee({status:s}).then(()=>{})},extension:e,extensionList:v,changeExtension:s=>{Y({extension:s}).then(k=>{$({type:"success",message:"\u5207\u6362\u5206\u673A\u6210\u529F",duration:1500})})}}}},ne={class:"monitor-base-info"},oe={class:"flex-box"},ae={class:"service-icon"},le={class:"flex-box flex-column"},se=n("p",{class:"name"},"\u5C0F\u7F8E8003",-1),ie={class:"el-dropdown-link flex-box"},ce={style:{"margin-left":"5px"}},de=x("\u7B7E\u5165"),re=x("\u7B7E\u51FA"),ue={class:"margin_t20"};function _e(d,o,m,e,v,h){const c=i("svg-icon"),l=i("el-dropdown-item"),f=i("el-dropdown-menu"),u=i("el-dropdown"),r=i("el-option"),s=i("el-select"),k=i("el-card");return _(),b("div",ne,[t(k,{class:"card-box",shadow:"never"},{default:a(()=>[n("section",oe,[n("div",ae,[t(c,{name:"avatar"})]),n("div",le,[se,t(u,{class:"dropdown-box",trigger:"hover",placement:"bottom",onCommand:e.handleCommand},{dropdown:a(()=>[t(f,null,{default:a(()=>[t(l,{command:1},{default:a(()=>[de]),_:1}),t(l,{command:0},{default:a(()=>[re]),_:1})]),_:1})]),default:a(()=>[n("span",ie,[t(c,{class:"status-icon",name:e.iconName},null,8,["name"]),n("span",ce,S(e.statusName),1)])]),_:1},8,["onCommand"])])]),n("div",ue,[t(s,{modelValue:e.extension,"onUpdate:modelValue":o[0]||(o[0]=g=>e.extension=g),placeholder:"\u8BF7\u9009\u62E9\u5206\u673A",style:{width:"200px"},onChange:e.changeExtension},{default:a(()=>[(_(!0),b(I,null,M(e.extensionList,g=>(_(),C(r,{key:g.id,value:g.extension,label:g.extension},null,8,["value","label"]))),128))]),_:1},8,["modelValue","onChange"])])]),_:1})])}var me=V(te,[["render",_e]]);const pe={props:{visible:{type:Boolean,default:!1}},setup(d,o){const m=p(!1),e=p(null),v=p(!1),h=D({callNumber:""}),c={callNumber:{required:!0,message:"\u8BF7\u8F93\u5165\u62E8\u6253\u53F7\u7801",trigger:"blur"}};return j(()=>d,()=>{v.value=d.visible},{immediate:!0,deep:!0}),{btnLoading:m,show:v,formRef:e,formData:h,formRules:c,handleClose:()=>{o.emit("handleCall")},handleSubmit:()=>{e.value.validate(u=>{!u||m.value||(m.value=!0,setTimeout(()=>{m.value=!1,o.emit("handleCall",h.callNumber)},500))})}}}},fe={class:"call-dialog"},ve={class:"dialog-footer"},ge=x("\u53D6\u6D88"),he=x("\u62E8\u6253");function be(d,o,m,e,v,h){const c=i("el-input"),l=i("el-form-item"),f=i("el-form"),u=i("el-button"),r=i("el-dialog");return _(),b("div",fe,[t(r,{title:"\u62E8\u6253\u7535\u8BDD",modelValue:e.show,"onUpdate:modelValue":o[1]||(o[1]=s=>e.show=s),"before-close":e.handleClose},{footer:a(()=>[n("span",ve,[t(u,{type:"default",onClick:e.handleClose},{default:a(()=>[ge]),_:1},8,["onClick"]),t(u,{type:"primary",loading:e.btnLoading,onClick:e.handleSubmit},{default:a(()=>[he]),_:1},8,["loading","onClick"])])]),default:a(()=>[t(f,{ref:"formRef",model:e.formData,rules:e.formRules},{default:a(()=>[t(l,{prop:"callNumber"},{default:a(()=>[t(c,{modelValue:e.formData.callNumber,"onUpdate:modelValue":o[0]||(o[0]=s=>e.formData.callNumber=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","before-close"])])}var ye=V(pe,[["render",be]]);const xe={props:{value:{type:Boolean,default:!1}},setup(d,o){const m=p(!1),e=p(null),v=D({templateId:""}),h={tel:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",trigger:"blur"}],templateId:[{required:!0,message:"\u8BF7\u9009\u62E9\u77ED\u4FE1\u6A21\u7248",trigger:"blur"}]};j(()=>d,()=>{m.value=d.value});const c=p([]),l=p(!1),f=p(!1),u=()=>{o.emit("handleClose")};return{visible:m,formRef:e,form:v,rules:h,btnLoading:l,msgTplList:c,loading:f,handleCancel:u,handleConfirm:()=>{e.value.validate(s=>{!s||l.value||(l.value=!0,F(v).then(()=>{$({type:"success",message:"\u53D1\u9001\u6210\u529F\uFF01",duration:1e3}),l.value=!1,u()}).catch(()=>{l.value=!1}))})}}}},Se={class:"msg-dialog"},Ce={class:"dialog-footer"},ke=x("\u53D6\u6D88"),we=x(" \u786E\u5B9A ");function Ie(d,o,m,e,v,h){const c=i("el-input"),l=i("el-form-item"),f=i("el-option"),u=i("el-select"),r=i("el-form"),s=i("el-button"),k=i("el-dialog");return _(),b("div",Se,[t(k,{modelValue:m.value,"onUpdate:modelValue":o[2]||(o[2]=g=>m.value=g),title:"\u53D1\u9001\u77ED\u4FE1","before-close":e.handleCancel},{footer:a(()=>[n("span",Ce,[t(s,{onClick:e.handleCancel},{default:a(()=>[ke]),_:1},8,["onClick"]),t(s,{type:"primary",loading:e.btnLoading,onClick:e.handleConfirm},{default:a(()=>[we]),_:1},8,["loading","onClick"])])]),default:a(()=>[t(r,{ref:"formRef",model:e.form,rules:e.rules,"label-width":"85px"},{default:a(()=>[t(l,{label:"\u624B\u673A\u53F7:",prop:"tel"},{default:a(()=>[t(c,{modelValue:e.form.tel,"onUpdate:modelValue":o[0]||(o[0]=g=>e.form.tel=g),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),t(l,{label:"\u77ED\u4FE1\u6A21\u7248:",prop:"templateId"},{default:a(()=>[t(u,{modelValue:e.form.templateId,"onUpdate:modelValue":o[1]||(o[1]=g=>e.form.templateId=g),filterable:"",remote:"","remote-method":d.getMsgTplListAll,loading:e.loading,placeholder:"\u8BF7\u9009\u62E9\u77ED\u4FE1\u6A21\u7248",style:{width:"100%"}},{default:a(()=>[(_(!0),b(I,null,M(e.msgTplList,g=>(_(),C(f,{key:g.id,label:g.name,value:g.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","remote-method","loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","before-close"])])}var Ne=V(xe,[["render",Ie]]);const Ve={components:{CallDialog:ye,SendMsg:Ne},props:{signStatus:{type:Number,default:2},callStatus:{type:Number,default:5},keepStatus:{type:Number,default:1},busyStatus:{type:Number,default:2}},setup(d,o){const m=D({}),e=p(2),v=p(5),h=p(1),c=p(!1);j(()=>d,()=>{e.value=d.signStatus,v.value=d.callStatus,h.value=d.keepStatus,console.log("sign",e.value),console.log("call",v.value)},{immediate:!0,deep:!0});const l=B(()=>!![5,6,7,8].includes(v.value)),f=()=>{c.value=!0},u=w=>{c.value=!1,w&&r(v.value,w)},r=(w,T)=>{o.emit("handleCallStatus",w,T)},s=w=>{o.emit("handleBusy",w)},k=()=>{v.value=0},g=p(0),O=p(!1);return{signStatus:e,callStatus:v,keepStatus:h,visible:c,handleCall:u,busyDisabled:l,showDialog:f,handleCallStatus:r,handleBusy:s,handleHangup:k,keepCallStatus:g,callObj:m,msgVisible:O}}},Te={class:"monitor-call-info"},$e={class:"communicate-box flex-box flex-column flex-between"},De={class:"call-status"},Oe=n("span",null,"\u7B49\u5F85\u547C\u5165\u4E2D",-1),Re=n("span",null,"\u547C\u53EB\u4E2D",-1),Le={key:0,style:{"margin-top":"10px"}},Be={style:{"margin-right":"10px"}},Ee=n("span",null,"\u5FD9\u788C\u4E2D",-1),Me={class:"btns flex-box flex-end"},je=x("\u53D1\u77ED\u4FE1"),qe={style:{"margin-right":"10px"}},Pe=x("\u547C\u53EB"),Ue=x("\u6302\u65AD"),He={style:{"margin-right":"10px"}},Je=x("\u7F6E\u5FD9"),ze=x("\u7F6E\u95F2"),Ke=x("\u4FDD\u6301"),We=x("\u6062\u590D"),Ae=x("\u547C\u53EB"),Xe=x("\u7F6E\u95F2"),Fe=x("\u4FDD\u6301");function Ge(d,o,m,e,v,h){const c=i("svg-icon"),l=i("el-button"),f=i("el-card"),u=i("CallDialog"),r=i("SendMsg");return _(),b("div",Te,[t(f,{class:"card-box",shadow:"never"},{default:a(()=>[n("div",$e,[n("div",De,[e.callStatus==6?(_(),b(I,{key:0},[t(c,{name:"call-status0",class:"call-status--icon"}),Oe],64)):(_(),b(I,{key:1},[n("div",null,[t(c,{name:"call-status1",class:"call-status--icon"}),Re]),e.callObj?(_(),b("div",Le,[n("span",Be,S(e.callObj.callNumber),1),n("span",null,S(e.callObj.name||"\u672A\u77E5"),1)])):N("",!0)],64)),m.busyStatus==3?(_(),b(I,{key:2},[t(c,{name:"call-status2",class:"call-status--icon"}),Ee],64)):N("",!0)]),n("div",Me,[t(l,{type:"primary",onClick:o[0]||(o[0]=s=>e.msgVisible=!0),style:{"margin-right":"10px"}},{default:a(()=>[je]),_:1}),e.signStatus==2?(_(),b(I,{key:0},[n("div",qe,[e.callStatus==5?(_(),C(l,{key:0,type:"success",onClick:e.showDialog},{default:a(()=>[Pe]),_:1},8,["onClick"])):(_(),C(l,{key:1,type:"danger",onClick:e.handleCallStatus},{default:a(()=>[Ue]),_:1},8,["onClick"]))]),n("div",He,[m.busyStatus==2?(_(),C(l,{key:0,type:"warning",onClick:o[1]||(o[1]=s=>e.handleBusy(3)),disabled:e.busyDisabled},{default:a(()=>[Je]),_:1},8,["disabled"])):N("",!0),m.busyStatus==3?(_(),C(l,{key:1,type:"warning",disabled:e.busyDisabled,onClick:o[2]||(o[2]=s=>e.handleBusy(2))},{default:a(()=>[ze]),_:1},8,["disabled"])):N("",!0)]),n("div",null,[e.keepStatus==1?(_(),C(l,{key:0,type:"primary",disabled:e.callStatus!==8,onClick:o[3]||(o[3]=s=>d.handleKeepStatus(1))},{default:a(()=>[Ke]),_:1},8,["disabled"])):N("",!0),e.keepStatus==2?(_(),C(l,{key:1,type:"primary",disabled:e.callStatus!==8,onClick:o[4]||(o[4]=s=>d.handleKeepStatus(2))},{default:a(()=>[We]),_:1},8,["disabled"])):N("",!0)])],64)):(_(),b(I,{key:1},[t(l,{type:"success",disabled:""},{default:a(()=>[Ae]),_:1}),t(l,{type:"primary",disabled:""},{default:a(()=>[Xe]),_:1}),t(l,{type:"primary",disabled:""},{default:a(()=>[Fe]),_:1})],64))])])]),_:1}),t(u,{visible:e.visible,onHandleCall:e.handleCall},null,8,["visible","onHandleCall"]),t(r,{value:e.msgVisible,onHandleClose:o[5]||(o[5]=s=>e.msgVisible=!1)},null,8,["value"])])}var Qe=V(Ve,[["render",Ge]]);const Ze={setup(d,o){const m=p("incoming"),e=r=>{console.log("name",r.props.name)},v=p([]);v.value=[{id:1,number:"15576790754",date:"2021-09-09",name:"",duration:"00:25:11"},{id:2,number:"13376890984",date:"2021-09-09",name:"\u5F20\u4E09",duration:"00:33:09"},{id:3,number:"18776090876",date:"2021-09-09",name:"",duration:"00:25:11"},{id:4,number:"15576790754",date:"2021-09-09",name:"",duration:"00:25:11"},{id:5,number:"13376890984",date:"2021-09-09",name:"",duration:"00:33:09"},{id:6,number:"18776090876",date:"2021-09-09",name:"",duration:"00:25:11"}];const h=D({pageNumber:1,pageSize:10}),c=p(0),l=r=>{h.pageNumber=r},f=p(0);return{activeName:m,handleTabClick:e,itemList:v,query:h,pageTotal:c,handleCurrentPage:l,activeId:f,handleItem:r=>{f.value=r.id,o.emit("showItem",r)}}}},Ye={class:"monitor-records-wrapper"},et={class:"card-header"},tt={class:"list"},nt={class:"list-items"},ot=["onClick"],at={class:"flex-box flex-between margin_b20"},lt={class:"list-item__number"},st={class:"list-item__date"},it={class:"flex-box flex-between"},ct={class:"list-item__name"},dt={class:"list-item__duration"};function rt(d,o,m,e,v,h){const c=i("el-tab-pane"),l=i("el-tabs"),f=i("el-card"),u=i("el-pagination");return _(),b("div",Ye,[t(f,{class:"card-box",shadow:"never"},{header:a(()=>[n("div",et,[t(l,{modelValue:e.activeName,"onUpdate:modelValue":o[0]||(o[0]=r=>e.activeName=r),class:"tabs-box",onTabClick:e.handleTabClick},{default:a(()=>[t(c,{label:"\u5DF2\u63A5\u6765\u7535",name:"incoming"}),t(c,{label:"\u672A\u63A5\u6765\u7535",name:"missed"})]),_:1},8,["modelValue","onTabClick"])])]),default:a(()=>[n("div",tt,[n("ul",nt,[(_(!0),b(I,null,M(e.itemList,r=>(_(),b("li",{key:r.id,onClick:s=>e.handleItem(r),class:X([r.id==e.activeId?"active":"","list-item"])},[t(f,{class:"card-item"},{default:a(()=>[n("p",at,[n("span",lt,S(r.number),1),n("span",st,S(r.date),1)]),n("p",it,[n("span",ct,S(r.name||"\u672A\u77E5"),1),n("span",dt,S(r.duration),1)])]),_:2},1024)],10,ot))),128))]),t(u,{small:"",onCurrentChange:e.handleCurrentPage,currentPage:e.query.pageNumber,"page-size":e.query.pageSize,layout:"prev, pager, next",total:e.pageTotal},null,8,["onCurrentChange","currentPage","page-size","total"])])]),_:1})])}var ut=V(Ze,[["render",rt]]),_t="./assets/1.b3f00c08.mp3";const mt={setup(){const d=p([{value:"\u60A8\u597D\uFF0C\u6211\u662FXXX\u667A\u80FD\u5BA2\u670D\u5C0F\u7F8E\uFF0C\u8BF7\u95EE\u6709\u4EC0\u4E48\u53EF\u4EE5\u5E2E\u60A8\uFF1F",type:2,name:"\u5C0F\u7F8E"},{value:"\u60A8\u597D\uFF0C\u6211\u60F3\u95EE\u4E00\u4E0B\u4F60\u4EEC\u8FD9\u4E2A\u4F9B\u6696\u6211\u8BBE\u7F6E\u768425\u5EA6\uFF0C\u5B9E\u9645\u53EA\u670915\u5EA6\u5DE6\u53F3\u662F\u4EC0\u4E48\u60C5\u51B5\uFF1F",type:1,name:"\u5F20\u5148\u751F"},{value:"\u60A8\u53EF\u4EE5\u68C0\u67E5\u4E00\u4E0B\u53D6\u6696\u9600\u95E8\u662F\u5426\u5B8C\u5168\u6253\u5F00\uFF0C\u68C0\u67E5\u4F9B\u70ED\u7BA1\u9053\u662F\u5426\u51FA\u73B0\u6F0F\u6C14\u73B0\u8C61",type:2,name:"\u5C0F\u7F8E"},{value:"\u90FD\u6392\u67E5\u4E86\u8FD8\u662F\u4E0D\u884C",type:1,name:"\u5F20\u5148\u751F"},{value:"\u975E\u5E38\u62B1\u6B49\u7ED9\u60A8\u5E26\u6765\u4E0D\u4FBF\uFF0C\u6211\u8FD9\u8FB9\u53EF\u4EE5\u5E2E\u60A8\u63D0\u4EA4\u5DE5\u5355\uFF0C\u8BF7\u6211\u4EEC\u7684\u5DE5\u4F5C\u4EBA\u5458\u4E0A\u95E8\u5E2E\u60A8\u6392\u67E5\uFF0C\u60A8\u770B\u53EF\u4EE5\u5417\uFF1F",type:2,name:"\u5C0F\u7F8E"},{value:"\u4E0D\u7528\uFF0C\u8F6C\u4EBA\u5DE5",type:1,name:"\u5F20\u5148\u751F"},{value:"\u597D\u7684\uFF0C\u8FD9\u8FB9\u5E2E\u60A8\u8F6C\u63A5\u4EBA\u5DE5\u5BA2\u670D\uFF0C\u8BF7\u7A0D\u5019",type:2,name:"\u5C0F\u7F8E"},{value:"\u5BA2\u670D\u4EE3\u88688003\u4E3A\u60A8\u670D\u52A1",type:3},{value:"\u60A8\u597D\uFF0C\u60A8\u53CD\u9988\u6E29\u5EA6\u5347\u4E0D\u4E0A\u53BB\u662F\u5427\uFF1F",type:2,name:"\u5C0F\u7F8E"},{value:"\u662F\u7684\uFF0C\u9600\u95E8\u5B8C\u5168\u6253\u5F00\u4E86\uFF0C\u7A97\u6237\u4E5F\u6CA1\u5F00\uFF0C\u5468\u8FB9\u7684\u90BB\u5C45\u4E5F\u95EE\u4E86\uFF0C\u5C31\u6211\u4EEC\u5BB6\u6E29\u5EA6\u5347\u4E0D\u4E0A\u53BB\uFF0C\u8FD9\u4E2A\u600E\u4E48\u56DE\u4E8B\uFF1F",type:1,name:"\u5F20\u5148\u751F"},{value:"\u975E\u5E38\u62B1\u6B49\u7ED9\u60A8\u5E26\u6765\u4E0D\u4FBF\uFF0C\u6211\u8FD9\u8FB9\u5B89\u6392\u6211\u4EEC\u7684\u5DE5\u4F5C\u4EBA\u5458\u4E0A\u95E8\u5E2E\u60A8\u68C0\u4FEE\u4E00\u4E0B\uFF0C\u60A8\u770B\u53EF\u4EE5\u5417\uFF1F",type:2},{value:"\u53EF\u4EE5\uFF0C\u4F60\u4EEC\u5565\u65F6\u5019\u6765\uFF1F",type:1,name:"\u5F20\u5148\u751F"},{value:"\u6211\u4EEC\u8FD9\u8FB9\u5C3D\u5FEB\u5E2E\u60A8\u5B89\u6392\u4E0A\u95E8\uFF0C\u8BF7\u95EE\u60A8\u8D35\u59D3\uFF1F",type:2,name:"\u5C0F\u7F8E"},{value:"\u5F20\u4E09",type:1,name:"\u5F20\u5148\u751F"},{value:"\u597D\u7684\uFF0C\u5F20\u5148\u751F\uFF0C\u8BF7\u95EE\u60A8\u5F00\u6237\u8D26\u53F7\u662F\u591A\u5C11\uFF1F",type:2,name:"\u5C0F\u7F8E"},{value:"\u8FD9\u4E2A\u6211\u4E0D\u8BB0\u5F97\u4E86",type:1},{value:"\u597D\u60A8\u53EF\u4EE5\u67E5\u4E00\u4E0B\u6211\u4EEC\u7ED9\u60A8\u7684\u5F00\u6237\u5355\uFF0C\u6216\u8005\u63D0\u4F9B\u5F00\u6237\u4EBA\u7684\u8EAB\u4EFD\u8BC1\u53F7",type:2},{value:"\u8EAB\u4EFD\u8BC1\u53F71100001990xxxxxx",type:1,name:"\u5F20\u5148\u751F"},{value:"\u597D\u7684\uFF0C\u8BF7\u95EE\u60A8\u4F4F\u54EA\u91CC\uFF1F",type:2,name:"\u5C0F\u7F8E"},{value:"\u5E78\u798F\u5C0F\u533A8\u5E621\u5355\u5143302",type:1,name:"\u5F20\u5148\u751F"},{value:"\u597D\u7684\uFF0C\u4E0A\u95E8\u8054\u7CFB\u60A8\u8FD9\u4E2A\u6765\u7535\u7535\u8BDD\u5417\uFF1F",type:2,name:"\u5C0F\u7F8E"},{value:"\u662F\u7684",type:1,name:"\u5F20\u5148\u751F"},{value:"\u597D\u7684\uFF0C\u6211\u8FD9\u8FB9\u5B89\u6392\u6211\u4EEC\u7684\u5DE5\u4F5C\u4EBA\u5458\u4E0A\u95E8\u5E2E\u60A8\u68C0\u4FEE\uFF0C\u8BF7\u60A8\u4FDD\u6301\u7535\u8BDD\u7545\u901A\u3002\u60A8\u4E5F\u53EF\u4EE5\u62E8\u6253\u6211\u4EEC\u7684\u667A\u80FD\u670D\u52A1\u70ED\u7EBF010-12345678\u63091\u6839\u636E\u8BED\u97F3\u63D0\u793A\u67E5\u8BE2\u5904\u7406\u8FDB\u5EA6\u3002",type:2,name:"\u5C0F\u7F8E"},{value:"\u597D\u7684\uFF0C\u8C22\u8C22",type:1,name:"\u5F20\u5148\u751F"},{value:"\u4E0D\u5BA2\u6C14\uFF0C\u9EBB\u70E6\u60A8\u7A0D\u540E\u63091\u7ED9\u6211\u6253\u4E2A\u975E\u5E38\u6EE1\u610F\uFF0C\u795D\u60A8\u751F\u6D3B\u6109\u5FEB\uFF0C\u518D\u89C1\uFF01",type:2,name:"\u5C0F\u7F8E"},{value:"\u597D\u7684\uFF0C\u518D\u89C1",type:1,name:"\u5F20\u5148\u751F"},{value:"\u8BF7\u60A8\u5BF9\u672C\u6B21\u670D\u52A1\u8FDB\u884C\u8BC4\u4EF7\uFF0C\u975E\u5E38\u6EE1\u610F\u8BF7\u63091\uFF0C\u6EE1\u610F\u8BF7\u63092\uFF0C\u4E00\u822C\u8BF7\u63093\uFF0C\u4E0D\u6EE1\u610F\u8BF7\u63094\uFF0C\u975E\u5E38\u4E0D\u6EE1\u610F\u8BF7\u63095",type:3},{value:"1",type:1,name:"\u5F20\u5148\u751F"},{value:"\u611F\u8C22\u60A8\u7684\u8BC4\u4EF7\uFF0C\u795D\u60A8\u751F\u6D3B\u6109\u5FEB\uFF0C\u518D\u89C1\uFF01",type:3}]);return{audioUrl:_t,dialogueList:d}}},pt={class:"monitor-dialogue"},ft={class:"title flex-box flex-center"},vt=n("p",{class:"margin_r20",style:{"line-height":"34px"}},"\u901A\u8BDD\u5F55\u97F3",-1),gt=["src"],ht={class:"dialogue-box"},bt={class:"dialogue-box--ul"},yt={key:0,class:"li-left"},xt={class:"flex-box dialogue-info"},St={class:"flex-box flex-column"},Ct={class:"dialogue-content"},kt={class:"dialogue-tools"},wt={class:"tools-item"},It={class:"tools-item"},Nt={key:1,class:"li-right flex-box"},Vt={class:"flex-box flex-column",style:{"align-items":"flex-end"}},Tt={class:"dialogue-content"};function $t(d,o,m,e,v,h){const c=i("svg-icon"),l=i("el-tooltip"),f=i("el-divider");return _(),b("div",pt,[n("div",ft,[vt,n("audio",{src:e.audioUrl,controls:"",style:{height:"34px"}},null,8,gt)]),n("div",ht,[n("ul",bt,[(_(!0),b(I,null,M(e.dialogueList,(u,r)=>(_(),b("li",{class:"dialogue-box--li",key:r},[u.type==1?(_(),b("div",yt,[n("div",xt,[t(c,{name:"customer",class:"dialogue-icon left"}),n("div",St,[n("span",null,S(u.name),1),n("span",Ct,S(u.value),1)])]),n("div",kt,[t(l,{class:"item",effect:"dark",content:"\u5386\u53F2\u8BB0\u5F55",placement:"bottom"},{default:a(()=>[n("span",wt,[t(c,{name:"assist",style:{"font-size":"18px"}})])]),_:1}),t(l,{class:"item",effect:"dark",content:"\u5F55\u97F3",placement:"bottom"},{default:a(()=>[n("span",It,[t(c,{name:"tape"})])]),_:1})])])):u.type==2?(_(),b("div",Nt,[n("div",Vt,[n("span",null,S(u.name),1),n("span",Tt,S(u.value),1)]),t(c,{name:u.type==2?"customer-service":"customer-service1",class:"dialogue-icon right"},null,8,["name"])])):N("",!0),u.type==3?(_(),C(f,{key:2,"content-position":"center"},{default:a(()=>[x(S(u.value),1)]),_:2},1024)):N("",!0)]))),128))])])])}var Dt=V(mt,[["render",$t]]);const Ot={props:{cardItem:{type:Object,default:null}},setup(d){const o=p(null);return j(()=>d,()=>{o.value=d.cardItem},{immediate:!0,deep:!0}),{item:o}}},Rt={class:"monitor-record-detail"},Lt=n("div",{class:"card-header"},"\u5386\u53F2\u8BB0\u5F55",-1),Bt={class:"content"},Et={class:"info"};function Mt(d,o,m,e,v,h){const c=i("el-descriptions-item"),l=i("el-descriptions"),f=i("el-card");return _(),b("div",Rt,[t(f,{class:"card-box",shadow:"never"},{header:a(()=>[Lt]),default:a(()=>[n("div",Bt,[n("div",Et,[t(l,{column:1,size:"default"},{default:a(()=>[t(c,{label:"\u7535\u8BDD:"},{default:a(()=>[x(S(e.item&&e.item.number),1)]),_:1}),t(c,{label:"\u59D3\u540D:"},{default:a(()=>[x(S(e.item&&e.item.name||"\u672A\u77E5"),1)]),_:1}),t(c,{label:"\u5904\u7406\u5EA7\u5E2D:"}),t(c,{label:"\u5C0F\u7ED3\u5185\u5BB9:"})]),_:1})])])]),_:1})])}var jt=V(Ot,[["render",Mt]]);const qt={components:{BaseInfo:me,CallInfo:Qe,Records:ut,Dialogue:Dt,RecordDetail:jt},setup(){const d=G(),o=B(()=>d.getters.userId),m=p(L("signStatus")||1),e=y=>{T(JSON.stringify({msgType:"frontSeatStatus",status:y}))},v=p(L("callStatus")||5),h=(y,R)=>{T(JSON.stringify({msgType:"frontSeatStatus",status:y})),R&&T(JSON.stringify({msgType:"frontDoubleCall",displayer:R}))},c=p(L("keepStatus")||1),l=y=>{c.value=y,J("keepStatus",y)},f=p(L("busyStatus")||2),u=y=>{f.value=y,J("busyStatus",y)},r=p(null),s=p(null),k="ws://192.168.10.104:8081/front",g=D({lockReconnect:!1,timeout:5e4,timeoutObj:null,serverTimeout:5e4,serverTimeoutObj:null,timeoutnum:null,sessionId:""}),O=()=>{if(typeof WebSocket=="undefined"){$({type:"danger",message:"\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301socket",duation:1500});return}s.value=new WebSocket(k),s.value.onopen=w,s.value.onerror=z,s.value.onmessage=K,s.value.onclose=W},w=()=>{let y=JSON.stringify({userId:o.value,msgType:"frontRegister"});T(y),q()},T=y=>{console.log("send",y),s.value.send(y)},z=()=>{P()},K=y=>{console.log(JSON.parse(y.data));const{frontContent:R,msgType:U,msg:A}=JSON.parse(y.data);if(console.log(JSON.parse(y.data)),console.log("msgType",U),U==="frontStatus"&&status<3&&(m.value=R.status),U==="ErrorMsg"){$({type:"warning",message:A,duation:1500}),r.value="";return}else q()},W=()=>{console.log("socket\u5173\u95ED"),s.value.close(),P()},q=()=>{s.value&&s.value.readyState==1?(console.log("readyState",s.value.readyState),T(JSON.stringify({msgType:"heartCheck"})),g.timeoutObj&&clearTimeout(g.timeoutObj),g.timeoutObj=setTimeout(()=>{q()},g.timeout)):P()},P=()=>{g.lockReconnect||(g.lockReconnect=!0,g.timeoutnum&&clearTimeout(g.timeoutnum),g.timeoutnum=setTimeout(()=>{O(),g.lockReconnect=!1},5e3))};O();const H=p(null);return{signStatus:m,handleSignStatus:e,callStatus:v,handleCallStatus:h,keepStatus:c,handleKeepStatus:l,busyStatus:f,handleBusyStatus:u,cardItemInfo:H,showItem:y=>{H.value=y}}}},Pt={class:"monitor-page-wrapper flex-box"},Ut={class:"page-left"},Ht={class:"user-box flex-box"},Jt={class:"record-box flex-box"};function zt(d,o,m,e,v,h){const c=i("BaseInfo"),l=i("CallInfo"),f=i("Records"),u=i("Dialogue"),r=i("RecordDetail"),s=i("PageWrapper");return _(),C(s,null,{default:a(()=>[n("div",Pt,[n("div",Ut,[n("div",Ht,[t(c,{signStatus:e.signStatus,callStatus:e.callStatus,onHandleStatus:e.handleSignStatus},null,8,["signStatus","callStatus","onHandleStatus"]),t(l,{signStatus:e.signStatus,callStatus:e.callStatus,keepStatus:e.keepStatus,busyStatus:e.busyStatus,onHandleCallStatus:e.handleCallStatus},null,8,["signStatus","callStatus","keepStatus","busyStatus","onHandleCallStatus"])]),n("div",Jt,[t(f,{onShowItem:e.showItem},null,8,["onShowItem"]),t(u)])]),t(r,{"card-item":e.cardItemInfo},null,8,["card-item"])])]),_:1})}var mn=V(qt,[["render",zt]]);export{mn as default};
